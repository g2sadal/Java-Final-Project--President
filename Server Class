 

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.List;
import java.util.ArrayList;

public class Server
{
   public static void main (String[] args) throws Exception
   {
       ServerSocket listener = new ServerSocket(1234);
       System.out.println("Server is running");
       try
       {
           while(true)
           {
               Game game = new Game();
               Player player1 = game.setPlayer1(new Player(listener.accept(), 1));
               Player player2 = game.setPlayer2(new Player(listener.accept(), 2));
               Player player3 = game.setPlayer3(new Player(listener.accept(), 3));
               Player player4 = game.setPlayer4(new Player(listener.accept(), 4));
               game.deal(player1, player2, player3, player4);
               player1.start();
               player2.start();
               player3.start();
               player4.start();
               while(true)
               {
                   if(player1.canMove())
                   {
                        game.makeMove(player1.getPlay());
                   }
                   if(player2.canMove())
                   {
                        game.makeMove(player2.getPlay());
                   }
                   if(player3.canMove())
                   {
                        game.makeMove(player3.getPlay());
                   }
                   if(player4.canMove())
                   {
                        game.makeMove(player4.getPlay());
                   }
               }
           }
       }
       finally
       { listener.close();}
   }
}
